(this["webpackJsonpexchange-app"]=this["webpackJsonpexchange-app"]||[]).push([[0],{32:function(e,t,n){e.exports=n(60)},41:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),u=n(8),i=n(3),s=n(26),o=n(27),l=n(29);!function(e){e.GET_EXCHANGE_RATES_REQUEST="GET_EXCHANGE_RATES_REQUEST",e.GET_EXCHANGE_RATES_SUCCESS="GET_EXCHANGE_RATES_SUCCESS",e.GET_EXCHANGE_RATES_FAILURE="GET_EXCHANGE_RATES_FAILURE"}(r||(r={}));var h=r;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={currencies:void 0,isFetching:!1},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.GET_EXCHANGE_RATES_REQUEST:return d({},e,{isFetching:t.isFetching});case h.GET_EXCHANGE_RATES_SUCCESS:return d({},e,{currencies:t.currencies,isFetching:t.isFetching});case h.GET_EXCHANGE_RATES_FAILURE:return d({},e,{isFetching:t.isFetching});default:return e}},v=Object(i.combineReducers)({state:p});var y=n(10),b=n(5),g=n(6),C=n(11),m=n(9),S=n(12),O=(n(41),n(7)),_=n(30),A=n(31),R=n.n(A),T="".concat("https://openexchangerates.org/api/latest.json","?app_id=").concat("fd72932d27da49799dc4fb46285edfec","&symbols=").concat("GBP,EUR,USD,RUB"),j=function(){function e(){Object(b.a)(this,e)}return Object(g.a)(e,[{key:"getExchangeRates",value:function(){try{return R.a.get(T)}catch(e){return Promise.reject(e)}}}]),e}(),N=function(){return function(e){return e({type:h.GET_EXCHANGE_RATES_REQUEST,isFetching:!0}),(new j).getExchangeRates().then((function(t){var n;e((n=t.data,{type:h.GET_EXCHANGE_RATES_SUCCESS,currencies:n,isFetching:!1}))})).catch((function(){e({type:h.GET_EXCHANGE_RATES_FAILURE,isFetching:!1})}))}},F=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(C.a)(this,Object(m.a)(t).call(this,e))).first=void 0,n.second=void 0,n.INITIAL_SYMBOL="EUR",n.props.getExchangeRate(),n.first=c.a.createRef(),n.second=c.a.createRef(),n.handleInputChange=n.handleInputChange.bind(Object(O.a)(n)),n.handleKeyDown=n.handleKeyDown.bind(Object(O.a)(n)),n.state={baseCurrency:n.INITIAL_SYMBOL,actualCurrency:n.INITIAL_SYMBOL,baseValue:void 0,actualValue:void 0},n}return Object(S.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){return e.props.getExchangeRate()}),1e4)}},{key:"renderCurrencyOptions",value:function(e){return e&&_.map(e.rates,(function(e,t){return c.a.createElement("option",{key:t,value:t},t)}))}},{key:"handleBaseCurrencySelectChange",value:function(e){var t=void 0,n=e.target.value;this.second.current&&(t=this.calculateValue(this.second.current.valueAsNumber,this.state.actualCurrency,n)),this.setState({baseCurrency:n,baseValue:t})}},{key:"handleActualCurrencySelectChange",value:function(e){var t=void 0,n=e.target.value;this.first.current&&(t=this.calculateValue(this.first.current.valueAsNumber,this.state.baseCurrency,n)),this.setState({actualCurrency:n,actualValue:t})}},{key:"handleInputChange",value:function(e){var t=this.state,n=t.baseCurrency,r=t.actualCurrency,a=Number(parseFloat(e.target.value).toFixed(2));if(isNaN(a)||void 0===e.target.value)return this.first.current&&this.second.current&&(this.first.current.value="",this.second.current.value=""),void this.setState({baseValue:void 0,actualValue:void 0});if("from"===e.target.name){var c=this.calculateValue(a,n,r);this.setState({baseValue:Number(a.toFixed(2)),actualValue:Number(c.toFixed(2))})}else{var u=this.calculateValue(a,r,n);this.setState({baseValue:Number(u.toFixed(2)),actualValue:Number(a.toFixed(2))})}}},{key:"handleKeyDown",value:function(e){!this.checkValidity(e.keyCode)&&this.first.current&&this.second.current&&(e.preventDefault(),this.first.current.value="",this.second.current.value="",this.setState({baseValue:void 0,actualValue:void 0}))}},{key:"checkValidity",value:function(e){return[48,49,50,51,52,53,54,55,56,57,190].some((function(t){return t===e}))}},{key:"calculateValue",value:function(e,t,n){var r=this.props.currencies;if(t===n)return e;if(r){var a=r.rates,c=e/a[t];return Number((c*a[n]).toFixed(2))}return 0}},{key:"calculateExchangeRate",value:function(e,t){var n=this.props.currencies;if(e===t)return 1;var r=0;if(n){var a=n.rates;return r=1/a[e],Number((r*a[t]).toFixed(5))}return r}},{key:"render",value:function(){var e=this,t=this.props.currencies,n=this.state,r=n.baseCurrency,a=n.actualCurrency,u=n.baseValue,i=n.actualValue;return c.a.createElement("div",{className:"Container"},c.a.createElement("form",{className:"Form"},c.a.createElement("select",{value:r,onChange:function(t){return e.handleBaseCurrencySelectChange(t)}},this.renderCurrencyOptions(t)),c.a.createElement("input",{name:"from",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Enter your value"},placeholder:"Enter your value",onKeyDown:this.handleKeyDown,value:u,ref:this.first,min:0,onChange:this.handleInputChange,type:"number"})),c.a.createElement("button",{className:"Swapper",onClick:function(){e.setState({baseCurrency:a,actualCurrency:r,baseValue:i,actualValue:u})}},"Swap"),c.a.createElement("span",{className:"ConvertRate"},"1 ",r," ~ ",this.calculateExchangeRate(r,a)," ",a),c.a.createElement("form",{className:"Form"},c.a.createElement("select",{value:a,onChange:function(t){return e.handleActualCurrencySelectChange(t)}},this.renderCurrencyOptions(t)),c.a.createElement("input",{name:"to",onBlur:function(e){return e.target.placeholder="Enter your value"},onFocus:function(e){return e.target.placeholder=""},placeholder:"Enter your value",onKeyDown:this.handleKeyDown,value:i,ref:this.second,onChange:this.handleInputChange,min:0,type:"number"})))}}]),t}(a.Component),G=Object(y.b)((function(e){return{currencies:e.state.currencies,isFetching:e.state.isFetching}}),(function(e){return{getExchangeRate:function(){return e(N())}}}))(F),V=function(e){function t(){return Object(b.a)(this,t),Object(C.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(G,null))}}]),t}(a.Component),k=function(e){return a.createElement(y.a,{store:e.store},a.createElement(V,null))},w=Object(i.createStore)(v,void 0,Object(o.composeWithDevTools)(Object(i.applyMiddleware)(s.a)));u.render(a.createElement(k,{store:w}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.caf5c004.chunk.js.map